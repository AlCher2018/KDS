  Ограничение количества архивных файлов
---------------------------------------------

Ограничить количество архивных файлов можно в настройках системы логирования NLog.
Настройки NLog-а находятся в config-файле приложения - это элемент <nlog>...</nlog>.
Для каждого приложения может быть несколько config-файлов, настройки NLog находятся в одном из них. Например для кдс-службы настройки NLog находятся в файле KDSService.config.
В элемент <nlog> есть вложенные элементы <target>...</target>. Именно этот элемент отвечает за функциональные возможности и форматирование лог-файлов. Если <target> настроен на создание архивных файлов, то можно ограничить их количество, установив максимальное количество архивных файлов в атрибуте maxArchiveFiles="n", где n - целое число. Если архивы журнала создаются каждый час (archiveEvery="Hour"), то за сутки будет создано 24 файла. Если установить maxArchiveFiles="120", то архивы будут ограничиваться 5-ю сутками.

Чтобы не искать нужный config-файл и не добавлять вручную атрибут maxArchiveFiles, была создана небольшая консольная утилита nlog_add_maxArchiveFiles.exe, которая автоматизирует данную работу.
Для этого достаточно запустить утилиту в папке приложения и она сама просканирует config-файлы, найдет элементы <nlog> и <target> и добавить или изменит значение атрибута maxArchiveFiles.
Данная утилита находится на нашем ФТП: "ftp://integra-its\ftp@62.80.172.190/IT Department/!Soft_dev/_utilities/nlog_add_maxArchiveFiles.exe".
Если запусить утилиту без параметров, то атрибут maxArchiveFiles будет установлен в значение 120.
Можно запустить утилиту с аргументом -set n, где n - нужное значение максимального количества архивных файлов.


